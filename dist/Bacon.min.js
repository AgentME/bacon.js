!function(t,n){"function"==typeof define&&define.amd?define(["exports"],function(r){n(t.Bacon=r,t)}):"object"==typeof exports?n(exports,global):n(t,t)}(this,function(t,n){"use strict";!function(t){var n=t.polyfill={};n.inherits=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(t.__proto__=n)},n.defaults=function(t,n){for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t},n.prototypeProperties=function(t,n,r){n&&Object.defineProperties(t,n),r&&Object.defineProperties(t.prototype,r)},n.applyConstructor=function(t,n){var r=Object.create(t.prototype),e=t.apply(r,n);return null==e||"object"!=typeof e&&"function"!=typeof e?r:e},n.taggedTemplateLiteral=function(t,n){return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))},n.interopRequire=function(t){return t&&(t["default"]||t)},n.toArray=function(t){return Array.isArray(t)?t:Array.from(t)},n.slicedToArray=function(t,n){if(Array.isArray(t))return t;for(var r,e=[],u=t[Symbol.iterator]();!(r=u.next()).done&&(e.push(r.value),!n||e.length!==n););return e},n.objectWithoutProperties=function(t,n){var r={};for(var e in t)n.indexOf(e)>=0||Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r},n.hasOwn=Object.prototype.hasOwnProperty,n.slice=Array.prototype.slice,n.bind=Function.prototype.bind,n.defineProperty=function(t,n,r){return Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0})}}("undefined"==typeof n?self:n);var r;return r=function(t){var r,e,u=[].slice,i={getOrElse:function(t){return t},filter:function(){return i},map:function(){return i},forEach:function(){},isDefined:!1,toArray:function(){return[]},inspect:function(){return"none"},toString:function(){return this.inspect()}},o=function(){var t,n,e,u,i,o,s,c,a,l,f,h,p,y;return l=void 0,f=[],h={},n=[],e=0,t=function(t){return l?n.push(t):t()},p=function(t,n){var r;return l?(r=h[t.id],null==r?(r=h[t.id]=[n],f.push(t)):r.push(n)):n()},i=function(){for(;f.length>0;)s(0);return void 0},s=function(t){var n,r,e,u,i,s;for(r=f[t],e=r.id,u=h[e],f.splice(t,1),delete h[e],o(r),i=0,s=u.length;s>i;i++)(n=u[i])();return void 0},o=function(t){var n,e,u,i,c;for(e=t.internalDeps(),i=0,c=e.length;c>i;i++)n=e[i],o(n),h[n.id]&&(u=r.indexOf(f,n),s(u));return void 0},a=function(t,r,u,o){var s,c;if(l)return u.apply(r,o);l=t;try{c=u.apply(r,o),i()}finally{for(l=void 0;e<n.length;)s=n[e],e++,s();e=0,n=[]}return c},u=function(){return l?l.id:void 0},y=function(n,r){var e,u,i;return i=!1,e=function(){},u=function(){return i=!0,e()},e=n.dispatcher.subscribe(function(n){return t(function(){var t;return i||(t=r(n),t!==G.noMore)?void 0:u()})}),u},c=function(){return f.length>0},{whenDoneWith:p,hasWaiters:c,inTransaction:a,currentEventId:u,wrappedSubscribe:y,afterTransaction:t}}(),s=function(){var t,n,r;return t=2<=arguments.length?u.call(arguments,0,r=arguments.length-1):(r=0,[]),n=arguments[r++],y.apply(null,t).apply(n)},c=function(t,n){var e,u;return u=t.slice(1).split("."),e=r.map(a(n),u),function(n){var r,u;for(r=0,u=e.length;u>r;r++)t=e[r],n=t(n);return n}},a=function(t){return function(n){return function(r){var e;return r?(e=r[n],j(e)?e.apply(r,t):e):void 0}}},l=function(t){return t.slice(1)},f=function(t){var n;return j(t)?t:Z(t)?(n=l(t),function(t,r){return t[n](r)}):P("not a function or a field key: "+t,!1)},h=function(t){return t instanceof vn||t===i?t:new vn(t)},p=0,y=function(){var t,n,r;return n=arguments[0],r=arguments[1],t=3<=arguments.length?u.call(arguments,2):[],(n||r)instanceof yn?n||r:new yn(n,r,t)},d=function(t){return q(t)?r.flatMap(d,t):D(t)?[t]:t instanceof fn?[t.obs]:[]},v=function(t,n){var e;return null==n&&(n=[]),e=function(t){var u;return r.contains(n,t)?!0:(u=t.internalDeps(),u.length?(n.push(t),r.any(u,e)):(n.push(t),!1))},r.any(t,e)},g=function(){var t;return t=1<=arguments.length?u.call(arguments,0):[],new dn(t).unsubscribe},m=function(t,n,e,u){var i,o,s;return s=[t],i=[],o=new on(y(t,"flatMap"+(e?"First":""),n),function(o){var s,c,a,l,f;return a=new dn,l=[],f=function(t){var e;return e=Q(n(t.value())),i.push(e),a.add(function(t,n){return e.dispatcher.subscribe(function(u){var a;return u.isEnd()?(r.remove(e,i),c(),s(n),G.noMore):(u instanceof tn&&(u=u.toNext()),a=o(u),a===G.noMore&&t(),a)})})},c=function(){var t;return t=l.shift(),t?f(t):void 0},s=function(t){return t(),a.empty()?o(x()):void 0},a.add(function(n,r){return t.dispatcher.subscribe(function(t){return t.isEnd()?s(r):t.isError()?o(t):e&&a.count()>1?G.more:a.unsubscribed?G.noMore:u&&a.count()>u?l.push(t):f(t)})}),a.unsubscribe}),o.internalDeps=function(){return i.length?s.concat(i):s},o},b=n.Error,w=[],E=function(t,n){return function(){return t.apply(n,arguments)}},S=function(t){return function(){var n,r,e,i;return e=arguments[0],n=2<=arguments.length?u.call(arguments,1):[],"object"==typeof e&&n.length&&(r=e,i=n[0],e=function(){return r[i].apply(r,arguments)},n=n.slice(1)),t.apply(null,[e].concat(u.call(n)))}},A=function(t){var n,r,e;if(w.length&&!A.running)try{for(A.running=!0,r=0,e=w.length;e>r;r++)(n=w[r])(t)}finally{delete A.running}return void 0},M=function(){},k=function(t){return t},I=function(t){return new tn(t,!0)},W=function(t){return new Y(t,!0)},x=function(){return new nn},O=function(t){return t instanceof J?t:W(t)},T=function(t){return t.slice(0)},P=function(t,n){if(!n)throw new b(t)},V=function(t){if(!(t instanceof on))throw new b("not an EventStream : "+t)},B=function(t){if(!(t instanceof un))throw new b("not an Observable : "+t)},C=function(t){return P("not a function : "+t,j(t))},j=function(t){return"function"==typeof t},q=function(t){return t instanceof Array},D=function(t){return t instanceof un},H=function(t){if(!q(t))throw new b("not an array : "+t)},F=function(t){return P("no arguments supported",0===t.length)},L=function(t,n){return function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return t.apply(null,n.concat(r))}},_=function(t){return 1===t.length&&D(t[0])?r.always(t[0]):z(t)},z=function(t){return t=Array.prototype.slice.call(t),U.apply(null,t)},U=S(function(){var t,n;return n=arguments[0],t=2<=arguments.length?u.call(arguments,1):[],j(n)?t.length?L(n,t):n:Z(n)?c(n,t):r.always(n)}),N=function(t,n){return U.apply(null,[t].concat(u.call(n)))},R=function(t){return j(t)?t:r.always(t)},Q=function(t){return D(t)?t:G.once(t)},Z=function(t){return"string"==typeof t&&t.length>1&&"."===t.charAt(0)},$=function(t,n){return S(function(){var r,e,i;return e=arguments[0],r=2<=arguments.length?u.call(arguments,1):[],i=L(n,[function(t,n){return e.apply(null,u.call(t).concat([n]))}]),s.apply(null,[G,t,e].concat(u.call(r),[G.combineAsArray(r).flatMap(i)]))})},K=function(t,n,r,e){var u;return n instanceof sn?(u=n.sampledBy(t,function(t,n){return[t,n]}),e.call(u,function(t){var n,r;return n=t[0],r=t[1],n}).map(function(t){var n,r;return n=t[0],r=t[1]})):(n=N(n,r),e.call(t,n))},X=function(t,n){var r;return r=new on(y(t,"justInitValue"),function(n){var e,u;return u=void 0,e=t.dispatcher.subscribe(function(t){return t.isEnd()||(u=t),G.noMore}),o.whenDoneWith(r,function(){return null!=u&&n(u),n(x())}),e}),r.concat(n).toProperty()},G={toString:function(){return"Bacon"}};G.version="<version>",G.isFieldKey=Z,G.fromBinder=function(t,n){return n||(n=r.id),new on(y(G,"fromBinder",t,n),function(e){var u,i,o;return o=!1,u=function(){i&&(o||i(),o=!0)},i=t(function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var s,c,a,l,f;for(a=n.apply(this,t),q(a)&&r.last(a)instanceof J||(a=[a]),c=G.more,l=0,f=a.length;f>l;l++)if(s=a[l],c=e(s=O(s)),c===G.noMore||s.isEnd())return i?u():G.scheduler.setTimeout(u,0),c;return c}),u})},G.$={},G.$.asEventStream=function(t,n,r){var e;return j(n)&&(e=[n,void 0],r=e[0],n=e[1]),s(this.selector||this,"asEventStream",t,G.fromBinder(function(r){return function(e){return r.on(t,n,e),function(){return r.off(t,n,e)}}}(this),r))},null!=(e="undefined"!=typeof jQuery&&null!==jQuery?jQuery:"undefined"!=typeof Zepto&&null!==Zepto?Zepto:void 0)&&(e.fn.asEventStream=G.$.asEventStream),G.fromEventTarget=function(t,n,r){var e,u,i,o,c,a,l,f;return e=null!=(i=null!=(o=null!=(c=t.addEventListener)?c:t.addListener)?o:t.bind)?i:t.on,u=null!=(a=null!=(l=null!=(f=t.removeEventListener)?f:t.removeListener)?l:t.unbind)?a:t.off,s(G,"fromEventTarget",t,n,G.fromBinder(function(r){return e.call(t,n,r),function(){return u.call(t,n,r)}},r))},G.fromPromise=function(t,n){return s(G,"fromPromise",t,G.fromBinder(function(r){return t.then(r,function(t){return r(new rn(t))}),function(){return n&&"function"==typeof t.abort?t.abort():void 0}},function(t){return[t,x()]}))},G.noMore=["<no-more>"],G.more=["<more>"],G.later=function(t,n){return s(G,"later",t,n,G.fromPoll(t,function(){return[n,x()]}))},G.sequentially=function(t,n){var r;return r=0,s(G,"sequentially",t,n,G.fromPoll(t,function(){var t;return t=n[r++],r<n.length?t:r===n.length?[t,x()]:x()}))},G.repeatedly=function(t,n){var r;return r=0,s(G,"repeatedly",t,n,G.fromPoll(t,function(){return n[r++%n.length]}))},G.spy=function(t){return w.push(t)},G.fromCallback=$("fromCallback",function(){var t,n;return n=arguments[0],t=2<=arguments.length?u.call(arguments,1):[],G.fromBinder(function(r){return N(n,t)(r),M},function(t){return[t,x()]})}),G.fromNodeCallback=$("fromNodeCallback",function(){var t,n;return n=arguments[0],t=2<=arguments.length?u.call(arguments,1):[],G.fromBinder(function(r){return N(n,t)(r),M},function(t,n){return t?[new rn(t),x()]:[n,x()]})}),G.fromPoll=function(t,n){return s(G,"fromPoll",t,n,G.fromBinder(function(n){var r;return r=G.scheduler.setInterval(n,t),function(){return G.scheduler.clearInterval(r)}},n))},G.interval=function(t,n){return null==n&&(n={}),s(G,"interval",t,n,G.fromPoll(t,function(){return W(n)}))},G.constant=function(t){return new sn(y(G,"constant",t),function(n){return n(I(t)),n(x()),M})},G.never=function(){return new on(y(G,"never"),function(t){return t(x()),M})},G.once=function(t){return new on(y(G,"once",t),function(n){return n(O(t)),n(x()),M})},G.fromArray=function(t){var n;return H(t),t.length?(n=0,new on(y(G,"fromArray",t),function(r){var e,u,i;return i=!1,u=G.more,e=function(){var s;return u===G.noMore||i||(s=t[n++],u=r(O(s)),u===G.noMore)?void 0:n===t.length?r(x()):o.afterTransaction(e)},e(),function(){return i=!0}})):s(G,"fromArray",t,G.never())},G.mergeAll=function(){var t;return t=1<=arguments.length?u.call(arguments,0):[],q(t[0])&&(t=t[0]),t.length?new on(y.apply(null,[G,"mergeAll"].concat(u.call(t))),function(n){var e,u,i;return e=0,i=function(r){return function(u){return r.dispatcher.subscribe(function(r){var i;return r.isEnd()?(e++,e===t.length?n(x()):G.more):(i=n(r),i===G.noMore&&u(),i)})}},u=r.map(i,t),g.apply(null,u)}):G.never()},G.zipAsArray=function(){var t;return t=1<=arguments.length?u.call(arguments,0):[],q(t[0])&&(t=t[0]),s.apply(null,[G,"zipAsArray"].concat(u.call(t),[G.zipWith(t,function(){var t;return t=1<=arguments.length?u.call(arguments,0):[]})]))},G.zipWith=function(){var t,n,e;return t=arguments[0],n=2<=arguments.length?u.call(arguments,1):[],j(t)||(e=[t,n[0]],n=e[0],t=e[1]),n=r.map(function(t){return t.toEventStream()},n),s.apply(null,[G,"zipWith",t].concat(u.call(n),[G.when(n,t)]))},G.groupSimultaneous=function(){var t,n,r;return r=1<=arguments.length?u.call(arguments,0):[],1===r.length&&q(r[0])&&(r=r[0]),n=function(){var n,e,u;for(u=[],n=0,e=r.length;e>n;n++)t=r[n],u.push(new pn(t));return u}(),s.apply(null,[G,"groupSimultaneous"].concat(u.call(r),[G.when(n,function(){var t;return t=1<=arguments.length?u.call(arguments,0):[]})]))},G.combineAsArray=function(){var t,n,r,e,i,o,c;for(i=1<=arguments.length?u.call(arguments,0):[],1===i.length&&q(i[0])&&(i=i[0]),t=o=0,c=i.length;c>o;t=++o)e=i[t],D(e)||(i[t]=G.constant(e));return i.length?(r=function(){var t,r,e;for(e=[],t=0,r=i.length;r>t;t++)n=i[t],e.push(new fn(n,!0));return e}(),s.apply(null,[G,"combineAsArray"].concat(u.call(i),[G.when(r,function(){var t;return t=1<=arguments.length?u.call(arguments,0):[]}).toProperty()]))):G.constant([])},G.onValues=function(){var t,n,r;return n=2<=arguments.length?u.call(arguments,0,r=arguments.length-1):(r=0,[]),t=arguments[r++],G.combineAsArray(n).onValues(t)},G.combineWith=function(){var t,n;return t=arguments[0],n=2<=arguments.length?u.call(arguments,1):[],s.apply(null,[G,"combineWith",t].concat(u.call(n),[G.combineAsArray(n).map(function(n){return t.apply(null,n)})]))},G.combineTemplate=function(t){var n,e,u,i,o,c,a,l,f,h;return a=[],h=[],c=function(t){return t[t.length-1]},f=function(t,n,r){return c(t)[n]=r},n=function(t,n){return function(r,e){return f(r,t,e[n])}},o=function(t,n){return function(r){return f(r,t,n)}},l=function(t){return q(t)?[]:{}},u=function(t,r){var e,u;return D(r)?(h.push(r),a.push(n(t,h.length-1))):r!==Object(r)||"function"==typeof r||r instanceof RegExp||r instanceof Date?a.push(o(t,r)):(u=function(t){return function(n){var e;return e=l(r),f(n,t,e),n.push(e)}},e=function(t){return t.pop()},a.push(u(t)),i(r),a.push(e))},i=function(t){return r.each(t,u)},i(t),e=function(n){var r,e,u,i,o;for(u=l(t),r=[u],i=0,o=a.length;o>i;i++)(e=a[i])(r,n);return u},s(G,"combineTemplate",t,G.combineAsArray(h).map(e))},G.retry=function(t){var n,r,e,u,i,o;if(!j(t.source))throw new b("'source' option has to be a function");return o=t.source,u=t.retries||0,e=t.maxRetries||u,n=t.delay||function(){return 0},r=t.isRetryable||function(){return!0},i=function(t){var i,s;return s={source:o,retries:u-1,maxRetries:e,delay:n,isRetryable:r},i=function(){return G.retry(s)},G.later(n(t)).filter(!1).concat(G.once().flatMap(i))},s(G,"retry",t,o().flatMapError(function(t){return r(t)&&u>0?i({error:t,retriesDone:e-u}):G.once(new rn(t))}))};var J=function(){this.id=++en};J.prototype.isEvent=function(){return!0},J.prototype.isEnd=function(){return!1},J.prototype.isInitial=function(){return!1},J.prototype.isNext=function(){return!1},J.prototype.isError=function(){return!1},J.prototype.hasValue=function(){return!1},J.prototype.filter=function(){return!0},J.prototype.inspect=function(){return this.toString()},J.prototype.log=function(){return this.toString()};var Y=function(){var t=J,n=function e(n,r){t.call(this),!r&&j(n)||n instanceof e?(this.valueF=n,this.valueInternal=void 0):(this.valueF=void 0,this.valueInternal=n)};return polyfill.inherits(n,t),n.prototype.isNext=function(){return!0},n.prototype.hasValue=function(){return!0},n.prototype.value=function(){return this.valueF instanceof n?(this.valueInternal=this.valueF.value(),this.valueF=void 0):this.valueF&&(this.valueInternal=this.valueF(),this.valueF=void 0),this.valueInternal},n.prototype.fmap=function(t){var n,r;return this.valueInternal?(r=this.valueInternal,this.apply(function(){return t(r)})):(n=this,this.apply(function(){return t(n.value())}))},n.prototype.apply=function(t){return new n(t)},n.prototype.filter=function(t){return t(this.value())},n.prototype.toString=function(){return r.toString(this.value())},n.prototype.log=function(){return this.value()},n}(),tn=function(){var t=Y,n=function(){null!==t&&t.apply(this,arguments)};return polyfill.inherits(n,t),n.prototype.isInitial=function(){return!0},n.prototype.isNext=function(){return!1},n.prototype.apply=function(t){return new n(t)},n.prototype.toNext=function(){return new Y(this)},n}(),nn=function(){var t=J,n=function(){};return polyfill.inherits(n,t),n.prototype.isEnd=function(){return!0},n.prototype.fmap=function(){return this},n.prototype.apply=function(){return this},n.prototype.toString=function(){return"<end>"},n}(),rn=function(){var t=J,n=function(t){this.error=t};return polyfill.inherits(n,t),n.prototype.isError=function(){return!0},n.prototype.fmap=function(){return this},n.prototype.apply=function(){return this},n.prototype.toString=function(){return"<error> "+r.toString(this.error)},n}(),en=0,un=function(t){this.id=++en,s(t,this),this.initialDesc=this.desc};un.prototype.subscribe=function(t){return o.wrappedSubscribe(this,t)},un.prototype.subscribeInternal=function(t){return this.dispatcher.subscribe(t)},un.prototype.onValue=function(){var t;return t=z(arguments),this.subscribe(function(n){return n.hasValue()?t(n.value()):void 0})},un.prototype.onValues=function(t){return this.onValue(function(n){return t.apply(null,n)})},un.prototype.onError=function(){var t;return t=z(arguments),this.subscribe(function(n){return n.isError()?t(n.error):void 0})},un.prototype.onEnd=function(){var t;return t=z(arguments),this.subscribe(function(n){return n.isEnd()?t():void 0})},un.prototype.errors=function(){return s(this,"errors",this.filter(function(){return!1}))},un.prototype.filter=function(){var t,n;return n=arguments[0],t=2<=arguments.length?u.call(arguments,1):[],K(this,n,t,function(t){return s(this,"filter",t,this.withHandler(function(n){return n.filter(t)?this.push(n):G.more}))})},un.prototype.takeWhile=function(){var t,n;return n=arguments[0],t=2<=arguments.length?u.call(arguments,1):[],K(this,n,t,function(t){return s(this,"takeWhile",t,this.withHandler(function(n){return n.filter(t)?this.push(n):(this.push(x()),G.noMore)}))})},un.prototype.endOnError=function(){var t,n;return n=arguments[0],t=2<=arguments.length?u.call(arguments,1):[],null==n&&(n=!0),K(this,n,t,function(t){return s(this,"endOnError",this.withHandler(function(n){return n.isError()&&t(n.error)?(this.push(n),this.push(x())):this.push(n)}))})},un.prototype.take=function(t){return 0>=t?G.never():s(this,"take",t,this.withHandler(function(n){return n.hasValue()?(t--,t>0?this.push(n):(0===t&&this.push(n),this.push(x()),G.noMore)):this.push(n)}))},un.prototype.map=function(){var t,n;return n=arguments[0],t=2<=arguments.length?u.call(arguments,1):[],n instanceof sn?n.sampledBy(this,k):K(this,n,t,function(t){return s(this,"map",t,this.withHandler(function(n){return this.push(n.fmap(t))}))})},un.prototype.mapError=function(){var t;return t=z(arguments),s(this,"mapError",t,this.withHandler(function(n){return this.push(n.isError()?W(t(n.error)):n)}))},un.prototype.mapEnd=function(){var t;return t=z(arguments),s(this,"mapEnd",t,this.withHandler(function(n){return n.isEnd()?(this.push(W(t(n))),this.push(x()),G.noMore):this.push(n)}))},un.prototype.doAction=function(){var t;return t=z(arguments),s(this,"doAction",t,this.withHandler(function(n){return n.hasValue()&&t(n.value()),this.push(n)}))},un.prototype.skip=function(t){return s(this,"skip",t,this.withHandler(function(n){return n.hasValue()&&t>0?(t--,G.more):this.push(n)}))},un.prototype.skipDuplicates=function(t){return null==t&&(t=function(t,n){return t===n}),s(this,"skipDuplicates",this.withStateMachine(i,function(n,r){return r.hasValue()?r.isInitial()||n===i||!t(n.get(),r.value())?[new vn(r.value()),[r]]:[n,[]]:[n,[r]]}))},un.prototype.skipErrors=function(){return s(this,"skipErrors",this.withHandler(function(t){return t.isError()?G.more:this.push(t)}))},un.prototype.withStateMachine=function(t,n){var r;return r=t,s(this,"withStateMachine",t,n,this.withHandler(function(t){var e,u,i,o,s,c,a;for(e=n(r,t),u=e[0],o=e[1],r=u,s=G.more,c=0,a=o.length;a>c;c++)if(i=o[c],s=this.push(i),s===G.noMore)return s;return s}))},un.prototype.scan=function(t,n){var r,e,u;return n=f(n),r=h(t),u=function(t){return function(u){var i,s,c,a;return i=!1,a=M,s=G.more,c=function(){return i?void 0:r.forEach(function(t){return i=!0,s=u(new tn(function(){return t})),s===G.noMore?(a(),a=M):void 0})},a=t.dispatcher.subscribe(function(t){var e,o;return t.hasValue()?i&&t.isInitial()?G.more:(t.isInitial()||c(),i=!0,o=r.getOrElse(void 0),e=n(o,t.value()),r=new vn(e),u(t.apply(function(){return e}))):(t.isEnd()&&(s=c()),s!==G.noMore?u(t):void 0)}),o.whenDoneWith(e,c),a}}(this),e=new sn(y(this,"scan",t,n),u)},un.prototype.fold=function(t,n){return s(this,"fold",t,n,this.scan(t,n).sampledBy(this.filter(!1).mapEnd().toProperty()))},un.prototype.zip=function(t,n){return null==n&&(n=Array),s(this,"zip",t,G.zipWith([this,t],n))},un.prototype.diff=function(t,n){return n=f(n),s(this,"diff",t,n,this.scan([t],function(t,r){return[r,n(t[0],r)]}).filter(function(t){return 2===t.length}).map(function(t){return t[1]}))},un.prototype.flatMap=function(){return m(this,_(arguments))},un.prototype.flatMapFirst=function(){return m(this,_(arguments),!0)},un.prototype.flatMapWithConcurrencyLimit=function(){var t,n;return n=arguments[0],t=2<=arguments.length?u.call(arguments,1):[],s.apply(null,[this,"flatMapWithConcurrencyLimit",n].concat(u.call(t),[m(this,_(t),!1,n)]))},un.prototype.flatMapLatest=function(){var t,n;return t=_(arguments),n=this.toEventStream(),s(this,"flatMapLatest",t,n.flatMap(function(r){return Q(t(r)).takeUntil(n)}))},un.prototype.flatMapError=function(t){return s(this,"flatMapError",t,this.mapError(function(t){return new rn(t)}).flatMap(function(n){return n instanceof rn?t(n.error):G.once(n)}))},un.prototype.flatMapConcat=function(){return s.apply(null,[this,"flatMapConcat"].concat(u.call(arguments),[this.flatMapWithConcurrencyLimit.apply(this,[1].concat(u.call(arguments)))]))},un.prototype.bufferingThrottle=function(t){return s(this,"bufferingThrottle",t,this.flatMapConcat(function(n){return G.once(n).concat(G.later(t).filter(!1))}))},un.prototype.not=function(){return s(this,"not",this.map(function(t){return!t}))},un.prototype.log=function(){var t;return t=1<=arguments.length?u.call(arguments,0):[],this.subscribe(function(n){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log.apply(console,u.call(t).concat([n.log()])):void 0}),this},un.prototype.slidingWindow=function(t,n){return null==n&&(n=0),s(this,"slidingWindow",t,n,this.scan([],function(n,r){return n.concat([r]).slice(-t)}).filter(function(t){return t.length>=n}))},un.prototype.combine=function(t,n){var r;return r=f(n),s(this,"combine",t,n,G.combineAsArray(this,t).map(function(t){return r(t[0],t[1])}))},un.prototype.decode=function(t){return s(this,"decode",t,this.combine(G.combineTemplate(t),function(t,n){return n[t]}))},un.prototype.awaiting=function(t){return s(this,"awaiting",t,G.groupSimultaneous(this,t).map(function(t){var n,r;return n=t[0],r=t[1],0===r.length}).toProperty(!1).skipDuplicates())},un.prototype.name=function(t){return this._name=t,this},un.prototype.withDescription=function(){return y.apply(null,arguments).apply(this)},un.prototype.toString=function(){return this._name?this._name:this.desc.toString()},un.prototype.internalDeps=function(){return this.initialDesc.deps()},un.prototype.reduce=un.prototype.fold,un.prototype.assign=un.prototype.onValue,un.prototype.inspect=un.prototype.toString;var on=function(){var t=un,n=function(n,r,e){j(n)&&(e=r,r=n,n=[]),t.call(this,n),C(r),this.dispatcher=new cn(r,e),A(this)};return polyfill.inherits(n,t),n.prototype.delay=function(t){return s(this,"delay",t,this.flatMap(function(n){return G.later(t,n)}))},n.prototype.debounce=function(t){return s(this,"debounce",t,this.flatMapLatest(function(n){return G.later(t,n)}))},n.prototype.debounceImmediate=function(t){return s(this,"debounceImmediate",t,this.flatMapFirst(function(n){return G.once(n).concat(G.later(t).filter(!1))}))},n.prototype.throttle=function(t){return s(this,"throttle",t,this.bufferWithTime(t).map(function(t){return t[t.length-1]}))},n.prototype.bufferWithTime=function(t){return s(this,"bufferWithTime",t,this.bufferWithTimeOrCount(t,Number.MAX_VALUE))},n.prototype.bufferWithCount=function(t){return s(this,"bufferWithCount",t,this.bufferWithTimeOrCount(void 0,t))},n.prototype.bufferWithTimeOrCount=function(t,n){var r;return r=function(r){return r.values.length===n?r.flush():void 0!==t?r.schedule():void 0},s(this,"bufferWithTimeOrCount",t,n,this.buffer(t,r,r))},n.prototype.buffer=function(t,n,r){var e,u,i;return null==n&&(n=M),null==r&&(r=M),e={scheduled:!1,end:void 0,values:[],flush:function(){var t;if(this.scheduled=!1,this.values.length>0){if(t=this.push(W(this.values)),this.values=[],null!=this.end)return this.push(this.end);if(t!==G.noMore)return r(this)}else if(null!=this.end)return this.push(this.end)},schedule:function(){return this.scheduled?void 0:(this.scheduled=!0,t(function(t){return function(){return t.flush()}}(this)))}},i=G.more,j(t)||(u=t,t=function(t){return G.scheduler.setTimeout(t,u)}),s(this,"buffer",this.withHandler(function(t){return e.push=function(t){return function(n){return t.push(n)}}(this),t.isError()?i=this.push(t):t.isEnd()?(e.end=t,e.scheduled||e.flush()):(e.values.push(t.value()),n(e)),i}))},n.prototype.merge=function(t){var n;return V(t),n=this,s(n,"merge",t,G.mergeAll(this,t))},n.prototype.toProperty=function(t){var n,r;return r=0===arguments.length?i:h(function(){return t}),n=this.dispatcher,new sn(y(this,"toProperty",t),function(t){var e,u,i,o;return e=!1,o=M,u=G.more,i=function(){return e?void 0:r.forEach(function(n){return e=!0,u=t(new tn(n)),u===G.noMore?(o(),o=M):void 0})},o=n.subscribe(function(n){return n.hasValue()?e&&n.isInitial()?G.more:(n.isInitial()||i(),e=!0,r=new vn(n),t(n)):(n.isEnd()&&(u=i()),u!==G.noMore?t(n):void 0)}),i(),o})},n.prototype.toEventStream=function(){return this},n.prototype.sampledBy=function(t,n){return s(this,"sampledBy",t,n,this.toProperty().sampledBy(t,n))},n.prototype.concat=function(t){var r;return r=this,new n(y(r,"concat",t),function(n){var e,u;return u=M,e=r.dispatcher.subscribe(function(r){return r.isEnd()?u=t.dispatcher.subscribe(n):n(r)}),function(){return e(),u()}})},n.prototype.takeUntil=function(t){var n;return n={},s(this,"takeUntil",t,G.groupSimultaneous(this.mapEnd(n),t.skipErrors()).withHandler(function(r){var e,u,i,o,s,c;if(r.hasValue()){if(c=r.value(),e=c[0],t=c[1],t.length)return this.push(x());for(u=G.more,o=0,s=e.length;s>o;o++)i=e[o],u=this.push(i===n?x():W(i));return u}return this.push(r)}))},n.prototype.skipUntil=function(t){var n;return n=t.take(1).map(!0).toProperty(!1),s(this,"skipUntil",t,this.filter(n))},n.prototype.skipWhile=function(){var t,n,r;return n=arguments[0],t=2<=arguments.length?u.call(arguments,1):[],r=!1,K(this,n,t,function(t){return s(this,"skipWhile",t,this.withHandler(function(n){return!r&&n.hasValue()&&t(n.value())?G.more:(n.hasValue()&&(r=!0),this.push(n))}))})},n.prototype.holdWhen=function(t){var n,e,u;return u=t.startWith(!1),e=u.filter(function(t){return!t}),n=u.filter(r.id),s(this,"holdWhen",t,this.filter(!1).merge(u.flatMapConcat(function(t){return function(r){return r?t.scan([],function(t,n){return t.concat(n)}).sampledBy(e).take(1).flatMap(G.fromArray):t.takeUntil(n)}}(this))))},n.prototype.startWith=function(t){return s(this,"startWith",t,G.once(t).concat(this))},n.prototype.withHandler=function(t){return new n(y(this,"withHandler",t),this.dispatcher.subscribe,t)},n}(),sn=function(){var t=un,n=function(n,r,e){j(n)&&(e=r,r=n,n=[]),t.call(this,n),C(r),this.dispatcher=new an(this,r,e),A(this)};return polyfill.inherits(n,t),n.prototype.sampledBy=function(t,r){var e,u,i,o,c;return null!=r?r=f(r):(e=!0,r=function(t){return t.value()}),c=new fn(this,!1,e),i=new fn(t,!0,e),o=G.when([c,i],r),u=t instanceof n?o.toProperty():o,s(this,"sampledBy",t,r,u)},n.prototype.sample=function(t){return s(this,"sample",t,this.sampledBy(G.interval(t,{})))},n.prototype.changes=function(){return new on(y(this,"changes"),function(t){return function(n){return t.dispatcher.subscribe(function(t){return t.isInitial()?void 0:n(t)})}}(this))},n.prototype.withHandler=function(t){return new n(y(this,"withHandler",t),this.dispatcher.subscribe,t)},n.prototype.toProperty=function(){return F(arguments),this},n.prototype.toEventStream=function(){return new on(y(this,"toEventStream"),function(t){return function(n){return t.dispatcher.subscribe(function(t){return t.isInitial()&&(t=t.toNext()),n(t)})}}(this))},n.prototype.and=function(t){return s(this,"and",t,this.combine(t,function(t,n){return t&&n}))},n.prototype.or=function(t){return s(this,"or",t,this.combine(t,function(t,n){return t||n}))},n.prototype.delay=function(t){return this.delayChanges("delay",t,function(n){return n.delay(t)})},n.prototype.debounce=function(t){return this.delayChanges("debounce",t,function(n){return n.debounce(t)})},n.prototype.throttle=function(t){return this.delayChanges("throttle",t,function(n){return n.throttle(t)})},n.prototype.delayChanges=function(){var t,n,r;return t=2<=arguments.length?u.call(arguments,0,r=arguments.length-1):(r=0,[]),n=arguments[r++],s.apply(null,[this].concat(u.call(t),[X(this,n(this.changes()))]))},n.prototype.takeUntil=function(t){var n;return n=this.changes().takeUntil(t),s(this,"takeUntil",t,X(this,n))},n.prototype.startWith=function(t){return s(this,"startWith",t,this.scan(t,function(t,n){return n}))},n.prototype.bufferingThrottle=function(){var n;return(n=t.prototype.bufferingThrottle).call.apply(n,[this].concat(polyfill.slice.call(arguments))).toProperty()},n}(),cn=function(t,n){this._subscribe=t,this._handleEvent=n,this.subscribe=E(this.subscribe,this),this.handleEvent=E(this.handleEvent,this),this.subscriptions=[],this.queue=[],this.pushing=!1,this.ended=!1,this.prevError=void 0,this.unsubSrc=void 0};cn.prototype.hasSubscribers=function(){return this.subscriptions.length>0},cn.prototype.removeSub=function(t){return this.subscriptions=r.without(t,this.subscriptions)},cn.prototype.push=function(t){return t.isEnd()&&(this.ended=!0),o.inTransaction(t,this,this.pushIt,[t])},cn.prototype.pushToSubscriptions=function(t){var n,r,e,u,i,o;try{for(u=this.subscriptions,i=0,o=u.length;o>i;i++)e=u[i],r=e.sink(t),(r===G.noMore||t.isEnd())&&this.removeSub(e);return!0}catch(s){throw n=s,this.pushing=!1,this.queue=[],n}},cn.prototype.pushIt=function(t){if(this.pushing)return this.queue.push(t),G.more;if(t!==this.prevError){for(t.isError()&&(this.prevError=t),this.pushing=!0,this.pushToSubscriptions(t),this.pushing=!1;this.queue.length;)t=this.queue.shift(),this.push(t);return this.hasSubscribers()?G.more:(this.unsubscribeFromSource(),G.noMore)}},cn.prototype.handleEvent=function(t){return this._handleEvent?this._handleEvent(t):this.push(t)},cn.prototype.unsubscribeFromSource=function(){return this.unsubSrc&&this.unsubSrc(),this.unsubSrc=void 0},cn.prototype.subscribe=function(t){var n;return this.ended?(t(x()),M):(C(t),n={sink:t},this.subscriptions.push(n),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent),C(this.unsubSrc)),function(t){return function(){return t.removeSub(n),t.hasSubscribers()?void 0:t.unsubscribeFromSource()}}(this))};var an=function(){var t=cn,n=function(n,r,e){this.property=n,this.subscribe=E(this.subscribe,this),t.call(this,r,e),this.current=i,this.currentValueRootId=void 0,this.propertyEnded=!1};return polyfill.inherits(n,t),n.prototype.push=function(n){return n.isEnd()&&(this.propertyEnded=!0),n.hasValue()&&(this.current=new vn(n),this.currentValueRootId=o.currentEventId()),t.prototype.push.call(this,n)},n.prototype.maybeSubSource=function(n,r){return r===G.noMore?M:this.propertyEnded?(n(x()),M):t.prototype.subscribe.call(this,n)},n.prototype.subscribe=function(t){var n,r,e,u;return r=!1,e=G.more,this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)?(n=o.currentEventId(),u=this.currentValueRootId,!this.propertyEnded&&u&&n&&n!==u?(o.whenDoneWith(this.property,function(n){return function(){return n.currentValueRootId===u?t(I(n.current.get().value())):void 0}}(this)),this.maybeSubSource(t,e)):(o.inTransaction(void 0,this,function(){return e=t(I(this.current.get().value()))},[]),this.maybeSubSource(t,e))):this.maybeSubSource(t,e)},n}(),ln=function(){var t=on,n=function(){this.sink=void 0,this.subscriptions=[],this.ended=!1,this.guardedSink=E(this.guardedSink,this),this.subscribeAll=E(this.subscribeAll,this),this.unsubAll=E(this.unsubAll,this),t.call(this,y(G,"Bus"),this.subscribeAll)};return polyfill.inherits(n,t),n.prototype.unsubAll=function(){var t,n,r,e;for(e=this.subscriptions,n=0,r=e.length;r>n;n++)t=e[n],"function"==typeof t.unsub&&t.unsub();return void 0},n.prototype.subscribeAll=function(t){var n,r,e,u;for(this.sink=t,u=T(this.subscriptions),r=0,e=u.length;e>r;r++)n=u[r],this.subscribeInput(n);
return this.unsubAll},n.prototype.guardedSink=function(t){return function(n){return function(r){return r.isEnd()?(n.unsubscribeInput(t),G.noMore):n.sink(r)}}(this)},n.prototype.subscribeInput=function(t){return t.unsub=t.input.dispatcher.subscribe(this.guardedSink(t.input))},n.prototype.unsubscribeInput=function(t){var n,r,e,u,i;for(i=this.subscriptions,n=e=0,u=i.length;u>e;n=++e)if(r=i[n],r.input===t)return"function"==typeof r.unsub&&r.unsub(),void this.subscriptions.splice(n,1)},n.prototype.plug=function(t){var n;return B(t),this.ended?void 0:(n={input:t},this.subscriptions.push(n),null!=this.sink&&this.subscribeInput(n),function(n){return function(){return n.unsubscribeInput(t)}}(this))},n.prototype.end=function(){return this.ended=!0,this.unsubAll(),"function"==typeof this.sink?this.sink(x()):void 0},n.prototype.push=function(t){return"function"==typeof this.sink?this.sink(W(t)):void 0},n.prototype.error=function(t){return"function"==typeof this.sink?this.sink(new rn(t)):void 0},n}(),fn=function(t,n,r){this.obs=t,this.flatten=!0,this.sync=n,this.lazy=null!=r?r:!1,this.queue=[]};fn.prototype.subscribe=function(t){return this.obs.dispatcher.subscribe(t)},fn.prototype.toString=function(){return this.obs.toString()},fn.prototype.markEnded=function(){return this.ended=!0},fn.prototype.consume=function(){return this.lazy?{value:r.always(this.queue[0])}:this.queue[0]},fn.prototype.push=function(t){return this.queue=[t]},fn.prototype.mayHave=function(){return!0},fn.prototype.hasAtLeast=function(){return this.queue.length};var hn=function(){var t=fn,n=function(){this.flatten=!1,t.call.apply(t,[this].concat(polyfill.slice.call(arguments)))};return polyfill.inherits(n,t),n.prototype.consume=function(){return this.queue.shift()},n.prototype.push=function(t){return this.queue.push(t)},n.prototype.mayHave=function(t){return!this.ended||this.queue.length>=t},n.prototype.hasAtLeast=function(t){return this.queue.length>=t},n}(),pn=function(){var t=fn,n=function(n){t.call(this,n,!0)};return polyfill.inherits(n,t),n.prototype.consume=function(){var t;return t=this.queue,this.queue=[],{value:function(){return t}}},n.prototype.push=function(t){return this.queue.push(t.value())},n.prototype.hasAtLeast=function(){return!0},n}();fn.isTrigger=function(t){return t instanceof fn?t.sync:t instanceof on},fn.fromObservable=function(t){return t instanceof fn?t:t instanceof sn?new fn(t,!1):new hn(t,!0)};var yn=function(t,n,r){this.context=t,this.method=n,this.args=r,this.cached=void 0};yn.prototype.deps=function(){return this.cached||(this.cached=d([this.context].concat(this.args)))},yn.prototype.apply=function(t){return t.desc=this,t},yn.prototype.toString=function(){return r.toString(this.context)+"."+r.toString(this.method)+"("+r.map(r.toString,this.args)+")"},G.when=function(){var t,n,e,i,s,c,a,l,f,h,p,d,m,b,w,E,S,A,M,k;if(0===arguments.length)return G.never();for(s=arguments.length,w="when: expecting arguments in the form (Observable+,function)+",P(w,s%2===0),m=[],f=[],n=0,h=[];s>n;){for(h[n]=arguments[n],h[n+1]=arguments[n+1],l=r.toArray(arguments[n]),t=R(arguments[n+1]),a={f:t,ixs:[]},b=!1,E=0,A=l.length;A>E;E++){for(d=l[E],e=r.indexOf(m,d),b||(b=fn.isTrigger(d)),0>e&&(m.push(d),e=m.length-1),k=a.ixs,S=0,M=k.length;M>S;S++)i=k[S],i.index===e&&i.count++;a.ixs.push({index:e,count:1})}P("At least one EventStream required",b||!l.length),l.length>0&&f.push(a),n+=2}return m.length?(m=r.map(fn.fromObservable,m),c=r.any(m,function(t){return t.flatten})&&v(r.map(function(t){return t.obs},m)),p=new on(y.apply(null,[G,"when"].concat(u.call(h))),function(t){var e,u,i,s,a,l,h;return h=[],i=!1,s=function(t){var r,e,u;for(u=t.ixs,r=0,e=u.length;e>r;r++)if(n=u[r],!m[n.index].hasAtLeast(n.count))return!1;return!0},u=function(t){return!t.sync||t.ended},e=function(t){var r,e,u;for(u=t.ixs,r=0,e=u.length;e>r;r++)if(n=u[r],!m[n.index].mayHave(n.count))return!0},a=function(t){return!t.source.flatten},l=function(l){return function(y){var d,v,g;return v=function(){return o.whenDoneWith(p,d)},g=function(){var e,u,i,o,c,l;if(!(h.length>0))return G.more;for(i=G.more,o=h.pop(),c=0,l=f.length;l>c;c++)if(u=f[c],s(u))return e=function(){var t,r,e,i;for(e=u.ixs,i=[],t=0,r=e.length;r>t;t++)n=e[t],i.push(m[n.index].consume());return i}(),i=t(o.e.apply(function(){var t,n;return n=function(){var n,r,u;for(u=[],n=0,r=e.length;r>n;n++)t=e[n],u.push(t.value());return u}(),u.f.apply(u,n)})),h.length&&(h=r.filter(a,h)),i===G.noMore?i:g()},d=function(){var n;return n=g(),i&&(i=!1,(r.all(m,u)||r.all(f,e))&&(n=G.noMore,t(x()))),n===G.noMore&&y(),n},l.subscribe(function(n){var r;return n.isEnd()?(i=!0,l.markEnded(),v()):n.isError()?r=t(n):(l.push(n),l.sync&&(h.push({source:l,e:n}),c||o.hasWaiters()?v():d())),r===G.noMore&&y(),r||G.more})}},g.apply(null,function(){var t,n,r;for(r=[],t=0,n=m.length;n>t;t++)d=m[t],r.push(l(d));return r}())})):G.never()},G.update=function(){var t,n,r,e;for(n=arguments[0],e=2<=arguments.length?u.call(arguments,1):[],r=function(t){return function(){var n;return n=1<=arguments.length?u.call(arguments,0):[],function(r){return t.apply(null,[r].concat(n))}}},t=e.length-1;t>0;)e[t]instanceof Function||(e[t]=function(t){return function(){return t}}(e[t])),e[t]=r(e[t]),t-=2;return s.apply(null,[G,"update",n].concat(u.call(e),[G.when.apply(G,e).scan(n,function(t,n){return n(t)})]))};var dn=function(){var t,n,r,e=void 0===arguments[0]?[]:arguments[0];for(this.unsubscribe=E(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[],n=0,r=e.length;r>n;n++)t=e[n],this.add(t)};dn.prototype.add=function(t){var n,e,u;if(!this.unsubscribed)return n=!1,e=M,this.starting.push(t),u=function(u){return function(){return u.unsubscribed?void 0:(n=!0,u.remove(e),r.remove(t,u.starting))}}(this),e=t(this.unsubscribe,u),this.unsubscribed||n||this.subscriptions.push(e),r.remove(t,this.starting),e},dn.prototype.remove=function(t){return this.unsubscribed?void 0:void 0!==r.remove(t,this.subscriptions)?t():void 0},dn.prototype.unsubscribe=function(){var t,n,r,e;if(!this.unsubscribed){for(this.unsubscribed=!0,e=this.subscriptions,n=0,r=e.length;r>n;n++)(t=e[n])();return this.subscriptions=[],this.starting=[]}},dn.prototype.count=function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},dn.prototype.empty=function(){return 0===this.count()},G.CompositeUnsubscribe=dn;var vn=function(t){this.isDefined=!0,this.value=t};return vn.prototype.getOrElse=function(){return this.value},vn.prototype.get=function(){return this.value},vn.prototype.filter=function(t){return t(this.value)?new vn(this.value):i},vn.prototype.map=function(t){return new vn(t(this.value))},vn.prototype.forEach=function(t){return t(this.value)},vn.prototype.toArray=function(){return[this.value]},vn.prototype.inspect=function(){return"Some("+this.value+")"},vn.prototype.toString=function(){return this.inspect()},G.EventStream=on,G.Property=sn,G.Observable=un,G.Bus=ln,G.Initial=tn,G.Next=Y,G.End=nn,G.Error=rn,r={indexOf:Array.prototype.indexOf?function(t,n){return t.indexOf(n)}:function(t,n){var r,e,u,i;for(r=u=0,i=t.length;i>u;r=++u)if(e=t[r],n===e)return r;return-1},indexWhere:function(t,n){var r,e,u,i;for(r=u=0,i=t.length;i>u;r=++u)if(e=t[r],n(e))return r;return-1},head:function(t){return t[0]},always:function(t){return function(){return t}},negate:function(t){return function(n){return!t(n)}},empty:function(t){return 0===t.length},tail:function(t){return t.slice(1,t.length)},filter:function(t,n){var r,e,u,i;for(r=[],u=0,i=n.length;i>u;u++)e=n[u],t(e)&&r.push(e);return r},map:function(t,n){var r,e,u,i;for(i=[],e=0,u=n.length;u>e;e++)r=n[e],i.push(t(r));return i},each:function(t,n){var r,e;for(r in t)e=t[r],n(r,e);return void 0},toArray:function(t){return q(t)?t:[t]},contains:function(t,n){return-1!==r.indexOf(t,n)},id:function(t){return t},last:function(t){return t[t.length-1]},all:function(t,n){var e,u,i;for(null==n&&(n=r.id),u=0,i=t.length;i>u;u++)if(e=t[u],!n(e))return!1;return!0},any:function(t,n){var e,u,i;for(null==n&&(n=r.id),u=0,i=t.length;i>u;u++)if(e=t[u],n(e))return!0;return!1},without:function(t,n){return r.filter(function(n){return n!==t},n)},remove:function(t,n){var e;return e=r.indexOf(n,t),e>=0?n.splice(e,1):void 0},fold:function(t,n,r){var e,u,i;for(u=0,i=t.length;i>u;u++)e=t[u],n=r(n,e);return n},flatMap:function(t,n){return r.fold(n,[],function(n,r){return n.concat(t(r))})},cached:function(t){var n;return n=i,function(){return n===i&&(n=t(),t=void 0),n}},toString:function(t){var n,e,u,i;try{return p++,null==t?"undefined":j(t)?"function":q(t)?p>5?"[..]":"["+r.map(r.toString,t).toString()+"]":null!=(null!=t?t.toString:void 0)&&t.toString!==Object.prototype.toString?t.toString():"object"==typeof t?p>5?"{..}":(e=function(){var e;e=[];for(u in t)i=function(){try{return t[u]}catch(r){return n=r}}(),e.push(r.toString(u)+":"+r.toString(i));return e}(),"{"+e+"}"):t}finally{p--}}},G._=r,G.scheduler={setTimeout:function(t,n){return setTimeout(t,n)},setInterval:function(t,n){return setInterval(t,n)},clearInterval:function(t){return clearInterval(t)},now:function(){return(new Date).getTime()}},t=G}({}),t.Bacon=r,r});